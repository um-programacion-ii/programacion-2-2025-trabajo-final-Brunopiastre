spring.application.name=backend
server.port=8080

# =======================================================
# CONFIGURACION DE BASE DE DATOS (MySQL)
# =======================================================
# Uso de variables de entorno para Docker, con fallback a localhost
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/tf_backend_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=America/Argentina/Mendoza}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:tf_user}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:tf_pass}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# =======================================================
# CONFIGURACION REDIS (SESIONES)
# Requisito: Expiración 30m y almacenamiento en Redis
# =======================================================
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=6379
spring.data.redis.password=tf_redis_pass

spring.session.store-type=redis
server.servlet.session.timeout=30m
spring.session.redis.flush-mode=on_save
spring.session.redis.namespace=spring:session

# =======================================================
# CONFIGURACION JWT
# =======================================================
app.jwt-secret=MiClaveSecretaSuperLargaYComplejaParaElTrabajoFinalDeProgramacion2
app.jwt-expiration-ms=604800000

# =======================================================
# CONFIGURACION CATEDRA (API EXTERNA)
# =======================================================
# Importante: Usamos ambos nombres por si tu código usa uno u otro
catedra.api.url=http://192.168.194.250:8080
catedra.url=http://192.168.194.250:8080

# REEMPLAZA ESTE TOKEN POR EL TUYO PERSONAL
catedra.api.token=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJicnVubyIsImV4cCI6MTc2ODA3NjMyNSwiYXV0aCI6IlJPTEVfVVNFUiIsImlhdCI6MTc2NTQ4NDMyNX0.fbkGBiTrjYGexPHotrbAZHo7SW1aZ5M1BnusWod8jcA3SS4NqbIuRFpcdD7nqXx72QKoMtd1-BGR2KoR5LSeyQ
catedra.token=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJicnVubyIsImV4cCI6MTc2ODA3NjMyNSwiYXV0aCI6IlJPTEVfVVNFUiIsImlhdCI6MTc2NTQ4NDMyNX0.fbkGBiTrjYGexPHotrbAZHo7SW1aZ5M1BnusWod8jcA3SS4NqbIuRFpcdD7nqXx72QKoMtd1-BGR2KoR5LSeyQ

# URL del servicio Proxy
PROXY_SERVICE_URL=http://localhost:8081

# =======================================================
# CONFIGURACION KAFKA (TIEMPO REAL)
# =======================================================
# Requisito: Escuchar cambios en eventos de la cátedra
spring.kafka.bootstrap-servers=192.168.194.250:9092
spring.kafka.consumer.group-id=ticketflow-bruno
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# =======================================================
# EXTRAS
# =======================================================
spring.jackson.serialization.write-dates-as-timestamps=false
internal.api.secret=SuperSecretoDificilDeAdivinar123
app.fixed-token=TokenSecretoParaDesarrollo123
